@tailwind base;
@tailwind components;
@tailwind utilities;

/* Launx Metrics Design System - Glassmorphism Edition */

@layer base {
  :root {
    /* Background & Foreground */
    --background: var(--wl-background, 220 20% 97%);
    --foreground: var(--wl-foreground, 222 47% 11%);

    /* Card & Popover */
    --card: var(--wl-card, 0 0% 100%);
    --card-foreground: var(--wl-card-foreground, 222 47% 11%);

    --popover: 0 0% 100%;
    --popover-foreground: 222 47% 11%;

    /* Primary - Meta Blue */
    --primary: 217 91% 60%;
    --primary-foreground: 0 0% 100%;

    /* Secondary */
    --secondary: 210 40% 96%;
    --secondary-foreground: 222 47% 11%;

    /* Muted */
    --muted: var(--wl-muted, 210 40% 96%);
    --muted-foreground: var(--wl-muted-foreground, 215 16% 47%);

    /* Accent */
    --accent: var(--wl-accent, 210 40% 96%);
    --accent-foreground: var(--wl-accent-foreground, 222 47% 11%);

    /* Destructive */
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;

    /* Success */
    --success: 142 76% 36%;
    --success-foreground: 0 0% 100%;

    /* Warning */
    --warning: 45 93% 47%;
    --warning-foreground: 0 0% 100%;

    /* Border & Input */
    --border: var(--wl-border, 214 32% 91%);
    --input: var(--wl-border, 214 32% 91%);
    --ring: 217 91% 60%;

    --radius: 0.75rem;

    /* Chart Colors */
    --chart-1: 217 91% 60%;
    --chart-2: 142 76% 36%;
    --chart-3: 262 83% 58%;
    --chart-4: 24 95% 53%;
    --chart-5: 340 82% 52%;

    /* Sidebar */
    --sidebar-background: 0 0% 100%;
    --sidebar-foreground: 222 47% 11%;
    --sidebar-primary: 217 91% 60%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 210 40% 96%;
    --sidebar-accent-foreground: 222 47% 11%;
    --sidebar-border: 214 32% 91%;
    --sidebar-ring: 217 91% 60%;

    /* Glassmorphism Light Mode */
    --glass-bg: 0 0% 100%;
    --glass-border: 214 32% 85%;
    --glass-shadow: 217 91% 60%;
  }

  .dark {
    /* Background & Foreground */
    --background: var(--wl-background-dark, 222 47% 6%);
    --foreground: var(--wl-foreground-dark, 210 40% 98%);

    /* Card & Popover */
    --card: var(--wl-card-dark, 222 47% 9%);
    --card-foreground: var(--wl-card-foreground-dark, 210 40% 98%);

    --popover: 222 47% 9%;
    --popover-foreground: 210 40% 98%;

    /* Primary - Meta Blue */
    --primary: 217 91% 60%;
    --primary-foreground: 0 0% 100%;

    /* Secondary */
    --secondary: 217 33% 17%;
    --secondary-foreground: 210 40% 98%;

    /* Muted */
    --muted: var(--wl-muted-dark, 217 33% 17%);
    --muted-foreground: var(--wl-muted-foreground-dark, 215 20% 65%);

    /* Accent */
    --accent: var(--wl-accent-dark, 217 33% 17%);
    --accent-foreground: var(--wl-accent-foreground-dark, 210 40% 98%);

    /* Destructive */
    --destructive: 0 63% 31%;
    --destructive-foreground: 210 40% 98%;

    /* Success */
    --success: 142 76% 36%;
    --success-foreground: 0 0% 100%;

    /* Warning */
    --warning: 45 93% 47%;
    --warning-foreground: 0 0% 0%;

    /* Border & Input */
    --border: var(--wl-border-dark, 217 33% 17%);
    --input: var(--wl-border-dark, 217 33% 17%);
    --ring: 217 91% 60%;

    /* Chart Colors */
    --chart-1: 217 91% 60%;
    --chart-2: 142 76% 50%;
    --chart-3: 262 83% 65%;
    --chart-4: 24 95% 60%;
    --chart-5: 340 82% 58%;

    /* Sidebar */
    --sidebar-background: 222 47% 6%;
    --sidebar-foreground: 210 40% 98%;
    --sidebar-primary: 217 91% 60%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 217 33% 17%;
    --sidebar-accent-foreground: 210 40% 98%;
    --sidebar-border: 217 33% 17%;
    --sidebar-ring: 217 91% 60%;

    /* Glassmorphism Dark Mode */
    --glass-bg: 217 40% 14%;
    --glass-border: 217 50% 35%;
    --glass-shadow: 217 91% 60%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground antialiased;
  }

  /* Accessible Focus States */
  *:focus-visible {
    @apply outline-none ring-2 ring-primary ring-offset-2 ring-offset-background;
    transition: box-shadow 0.15s ease-out;
  }

  /* Button and interactive element focus */
  button:focus-visible,
  a:focus-visible,
  [role="button"]:focus-visible,
  input:focus-visible,
  textarea:focus-visible,
  select:focus-visible,
  [tabindex]:focus-visible {
    @apply outline-none ring-2 ring-primary/70 ring-offset-2 ring-offset-background;
  }

  /* Remove default focus outline but keep for keyboard navigation */
  :focus:not(:focus-visible) {
    outline: none;
    box-shadow: none;
  }
}

@layer components {
  /* Glassmorphism Base - Light Mode */
  .glass {
    @apply relative overflow-hidden;
    background: hsl(0 0% 100% / 0.9);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border: 1px solid hsl(214 32% 91% / 0.8);
    box-shadow: 
      0 4px 24px -4px hsl(217 91% 60% / 0.08),
      0 1px 2px hsl(0 0% 0% / 0.05);
  }

  /* Glassmorphism Base - Dark Mode */
  .dark .glass {
    background: hsl(217 40% 14% / 0.65);
    border: 1px solid hsl(217 50% 35% / 0.25);
    box-shadow: 
      0 4px 24px -4px hsl(0 0% 0% / 0.3),
      0 0 0 1px hsl(217 50% 35% / 0.15) inset;
  }

  /* Glass Card - Light Mode */
  .glass-card {
    @apply relative overflow-hidden rounded-xl;
    background: hsl(0 0% 100% / 0.95);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border: 1px solid hsl(214 32% 91%);
    box-shadow: 
      0 4px 24px -4px hsl(217 91% 60% / 0.06),
      0 1px 3px hsl(0 0% 0% / 0.04);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Glass Card - Dark Mode */
  .dark .glass-card {
    background: hsl(217 40% 14% / 0.65);
    border: 1px solid hsl(217 50% 35% / 0.25);
    box-shadow: 
      0 4px 24px -4px hsl(0 0% 0% / 0.3),
      0 0 0 1px hsl(217 50% 35% / 0.15) inset;
  }

  .glass-card:hover {
    transform: translateY(-2px);
  }

  :not(.dark) .glass-card:hover {
    box-shadow: 
      0 8px 32px -8px hsl(217 91% 60% / 0.12),
      0 2px 6px hsl(0 0% 0% / 0.06);
  }

  .dark .glass-card:hover {
    box-shadow: 
      0 8px 32px -8px hsl(0 0% 0% / 0.4),
      0 0 0 1px hsl(217 50% 35% / 0.2) inset;
  }

  /* Glass Header - Light Mode */
  .glass-header {
    @apply relative;
    background: hsl(0 0% 100% / 0.92);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border-bottom: 1px solid hsl(214 32% 91%);
    box-shadow: 0 2px 12px -2px hsl(0 0% 0% / 0.06);
  }

  /* Glass Header - Dark Mode */
  .dark .glass-header {
    background: hsl(217 40% 14% / 0.8);
    border-bottom: 1px solid hsl(217 50% 35% / 0.2);
    box-shadow: 0 4px 20px -4px hsl(0 0% 0% / 0.25);
  }

  /* Gradient Blobs for Background */
  .blob {
    @apply fixed pointer-events-none select-none;
    filter: blur(80px);
    opacity: 0.25;
  }

  .blob-primary {
    background: radial-gradient(circle, hsl(var(--primary)) 0%, transparent 70%);
  }

  .blob-accent {
    background: radial-gradient(circle, hsl(var(--chart-3)) 0%, transparent 70%);
  }

  .blob-success {
    background: radial-gradient(circle, hsl(var(--success)) 0%, transparent 70%);
  }

  .dark .blob {
    opacity: 0.15;
    filter: blur(100px);
  }

  /* Gradient Mesh Background */
  .bg-mesh {
    background-image: 
      radial-gradient(at 40% 20%, hsl(var(--primary) / 0.08) 0px, transparent 50%),
      radial-gradient(at 80% 0%, hsl(var(--chart-3) / 0.06) 0px, transparent 50%),
      radial-gradient(at 0% 50%, hsl(var(--success) / 0.05) 0px, transparent 50%),
      radial-gradient(at 80% 50%, hsl(var(--chart-4) / 0.04) 0px, transparent 50%),
      radial-gradient(at 0% 100%, hsl(var(--primary) / 0.06) 0px, transparent 50%);
  }

  .dark .bg-mesh {
    background-image: 
      radial-gradient(at 40% 20%, hsl(var(--primary) / 0.15) 0px, transparent 50%),
      radial-gradient(at 80% 0%, hsl(var(--chart-3) / 0.1) 0px, transparent 50%),
      radial-gradient(at 0% 50%, hsl(var(--success) / 0.08) 0px, transparent 50%),
      radial-gradient(at 80% 50%, hsl(var(--chart-4) / 0.06) 0px, transparent 50%),
      radial-gradient(at 0% 100%, hsl(var(--primary) / 0.1) 0px, transparent 50%);
  }

  /* Auth Page Specific Blobs */
  .auth-blobs::before,
  .auth-blobs::after {
    @apply fixed pointer-events-none select-none;
    content: "";
    border-radius: 50%;
    filter: blur(100px);
  }

  .auth-blobs::before {
    width: 400px;
    height: 400px;
    background: hsl(var(--primary) / 0.3);
    top: -100px;
    right: -100px;
  }

  .auth-blobs::after {
    width: 300px;
    height: 300px;
    background: hsl(var(--chart-3) / 0.25);
    bottom: -50px;
    left: -50px;
  }

  .dark .auth-blobs::before {
    background: hsl(var(--primary) / 0.2);
  }

  .dark .auth-blobs::after {
    background: hsl(var(--chart-3) / 0.15);
  }
}

@layer utilities {
  /* Fade in animation */
  .animate-fade-in {
    animation: fade-in 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  }

  @keyframes fade-in {
    from {
      opacity: 0;
      transform: translateY(12px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Scale in animation */
  .animate-scale-in {
    animation: scale-in 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  }

  @keyframes scale-in {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  /* Staggered animation delays */
  .animation-delay-100 { animation-delay: 100ms; }
  .animation-delay-200 { animation-delay: 200ms; }
  .animation-delay-300 { animation-delay: 300ms; }
  .animation-delay-400 { animation-delay: 400ms; }
  .animation-delay-500 { animation-delay: 500ms; }

  /* Skeleton loading - Glass variant - Light Mode */
  .skeleton-glass {
    @apply relative overflow-hidden;
    background: hsl(214 32% 91% / 0.6);
    backdrop-filter: blur(8px);
    border: 1px solid hsl(214 32% 91% / 0.4);
  }

  .dark .skeleton-glass {
    background: hsl(217 40% 14% / 0.4);
    border: 1px solid hsl(217 50% 35% / 0.15);
  }

  .skeleton-glass::after {
    content: "";
    @apply absolute inset-0;
    background: linear-gradient(
      90deg,
      transparent 0%,
      hsl(217 91% 60% / 0.08) 50%,
      transparent 100%
    );
    animation: skeleton-wave 2s ease-in-out infinite;
  }

  /* Skeleton loading - Shimmer variant - Light Mode */
  .skeleton-shimmer {
    @apply relative overflow-hidden;
    background: hsl(210 40% 96%);
  }

  .dark .skeleton-shimmer {
    background: hsl(217 33% 17% / 0.5);
  }

  .skeleton-shimmer::after {
    content: "";
    @apply absolute inset-0;
    background: linear-gradient(
      90deg,
      transparent 0%,
      hsl(0 0% 100% / 0.6) 25%,
      hsl(217 91% 60% / 0.1) 50%,
      hsl(0 0% 100% / 0.6) 75%,
      transparent 100%
    );
    background-size: 200% 100%;
    animation: shimmer-slide 1.8s ease-in-out infinite;
  }

  .dark .skeleton-shimmer::after {
    background: linear-gradient(
      90deg,
      transparent 0%,
      hsl(217 91% 60% / 0.1) 25%,
      hsl(217 91% 60% / 0.2) 50%,
      hsl(217 91% 60% / 0.1) 75%,
      transparent 100%
    );
    background-size: 200% 100%;
  }

  @keyframes shimmer-slide {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
  }

  @keyframes skeleton-wave {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
  }

  /* Legacy shimmer class for backwards compatibility */
  .shimmer {
    @apply skeleton-shimmer;
  }

  /* KPI Card hover effect */
  .kpi-card {
    @apply transition-all duration-300 ease-out;
  }
  
  .kpi-card:hover {
    @apply shadow-lg;
    transform: translateY(-3px);
  }

  /* Sparkline container */
  .sparkline-container {
    @apply h-10 opacity-50;
  }

  /* Smooth transitions */
  .transition-smooth {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Glow effect on hover */
  .hover-glow:hover {
    box-shadow: 0 0 20px hsl(var(--primary) / 0.3);
  }

  /* Interactive button glow */
  .btn-glow {
    @apply relative overflow-hidden;
  }

  .btn-glow::before {
    content: "";
    @apply absolute inset-0 opacity-0 transition-opacity duration-300;
    background: radial-gradient(circle at center, hsl(var(--primary) / 0.3) 0%, transparent 70%);
  }

  .btn-glow:hover::before {
    @apply opacity-100;
  }

  /* Badge hover effect */
  .badge-interactive {
    @apply transition-all duration-200 cursor-pointer;
  }

  .badge-interactive:hover {
    @apply scale-105 shadow-sm;
  }

  /* Table row hover */
  .table-row-interactive {
    @apply transition-all duration-150;
  }

  .table-row-interactive:hover {
    @apply bg-primary/5;
  }

  /* Input focus glow */
  .input-glow:focus {
    box-shadow: 0 0 0 3px hsl(var(--primary) / 0.1);
  }

  /* Card interactive */
  .card-interactive {
    @apply transition-all duration-300 cursor-pointer;
  }

  .card-interactive:hover {
    @apply -translate-y-1 shadow-xl;
  }

  /* Icon button pulse */
  .icon-btn-pulse {
    @apply relative;
  }

  .icon-btn-pulse::after {
    content: "";
    @apply absolute inset-0 rounded-full opacity-0 transition-all duration-300;
    background: hsl(var(--primary) / 0.2);
    transform: scale(0.8);
  }

  .icon-btn-pulse:hover::after {
    @apply opacity-100;
    transform: scale(1.2);
  }

  /* Link underline animation */
  .link-animated {
    @apply relative inline-block;
  }

  .link-animated::after {
    content: "";
    @apply absolute bottom-0 left-0 w-full h-0.5 bg-primary origin-left transition-transform duration-300;
    transform: scaleX(0);
  }

  .link-animated:hover::after {
    transform: scaleX(1);
  }

  /* Ripple effect container */
  .ripple-container {
    @apply relative overflow-hidden;
  }

  /* Floating action button */
  .fab {
    @apply transition-all duration-300;
    box-shadow: 0 4px 12px hsl(var(--primary) / 0.3);
  }

  .fab:hover {
    @apply -translate-y-1;
    box-shadow: 0 8px 24px hsl(var(--primary) / 0.4);
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    .animate-fade-in,
    .animate-scale-in {
      animation: none;
      opacity: 1;
      transform: none;
    }

    .kpi-card:hover,
    .glass-card:hover,
    .card-interactive:hover,
    .fab:hover {
      transform: none;
    }

    .btn-glow::before,
    .icon-btn-pulse::after,
    .link-animated::after {
      display: none;
    }

    .badge-interactive:hover {
      transform: none;
    }
  }

  /* Print Styles */
  @media print {
    /* Hide non-essential elements */
    .blob,
    .bg-mesh,
    nav,
    header,
    .bottom-nav,
    button:not([data-print]),
    .fab,
    [role="dialog"],
    [role="tooltip"],
    .toast,
    .sonner-toast {
      display: none !important;
    }

    /* Reset backgrounds and colors for printing */
    body,
    .bg-background {
      background: white !important;
      color: black !important;
    }

    /* Make cards visible */
    .card,
    .glass-card,
    .kpi-card {
      background: white !important;
      border: 1px solid #ddd !important;
      box-shadow: none !important;
      break-inside: avoid;
    }

    /* Ensure text is readable */
    .text-muted-foreground {
      color: #666 !important;
    }

    .text-foreground {
      color: black !important;
    }

    /* Charts and tables */
    table {
      border-collapse: collapse;
      width: 100%;
    }

    th, td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: left;
    }

    /* Page breaks */
    .page-break {
      page-break-after: always;
    }

    /* Maximize content width */
    .container {
      max-width: 100% !important;
      padding: 0 !important;
    }

    /* Hide scrollbars */
    * {
      overflow: visible !important;
    }

    /* Links */
    a {
      text-decoration: underline;
      color: black !important;
    }

    a[href^="http"]::after {
      content: " (" attr(href) ")";
      font-size: 0.8em;
      color: #666;
    }
  }

  /* Safe area for mobile bottom navigation */
  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  /* Mobile touch target minimum size */
  .touch-target {
    min-height: 44px;
    min-width: 44px;
  }

  /* Table row hover highlight */
  .table-row-interactive {
    @apply transition-all duration-200;
  }

  .table-row-interactive:hover {
    @apply bg-primary/5;
    box-shadow: inset 3px 0 0 hsl(var(--primary));
  }

  /* Ripple effect for buttons */
  .ripple {
    position: relative;
    overflow: hidden;
  }

  .ripple::after {
    content: "";
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    pointer-events: none;
    background-image: radial-gradient(circle, hsl(var(--primary-foreground) / 0.3) 10%, transparent 10.01%);
    background-repeat: no-repeat;
    background-position: 50%;
    transform: scale(10, 10);
    opacity: 0;
    transition: transform 0.5s, opacity 1s;
  }

  .ripple:active::after {
    transform: scale(0, 0);
    opacity: 0.3;
    transition: 0s;
  }

  /* Mobile-specific utilities */
  @media (max-width: 768px) {
    /* Larger touch targets on mobile */
    .btn-mobile {
      @apply min-h-[44px] min-w-[44px];
    }

    /* Compact spacing for mobile */
    .mobile-compact {
      @apply gap-2 p-3;
    }

    /* Stack items on mobile */
    .mobile-stack {
      @apply flex-col items-stretch;
    }
  }
}
